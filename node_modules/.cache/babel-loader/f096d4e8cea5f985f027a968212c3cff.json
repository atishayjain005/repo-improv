{"ast":null,"code":"/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @emails oncall+relay\n * \n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar React = require('react');\n\nvar useRelayEnvironment = require('./useRelayEnvironment');\n\nvar _require = require('relay-runtime'),\n    defaultCommitMutation = _require.commitMutation;\n\nvar useState = React.useState,\n    useEffect = React.useEffect,\n    useRef = React.useRef,\n    useCallback = React.useCallback;\n\nvar useIsMountedRef = require('./useIsMountedRef');\n\nfunction useMutation(mutation) {\n  var commitMutationFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultCommitMutation;\n  var environment = useRelayEnvironment();\n  var isMountedRef = useIsMountedRef();\n  var environmentRef = useRef(environment);\n  var mutationRef = useRef(mutation);\n  var inFlightMutationsRef = useRef(new Set());\n\n  var _useState = useState(false),\n      isMutationInFlight = _useState[0],\n      setMutationInFlight = _useState[1];\n\n  var cleanup = useCallback(function (disposable) {\n    if (environmentRef.current === environment && mutationRef.current === mutation) {\n      inFlightMutationsRef.current[\"delete\"](disposable);\n\n      if (isMountedRef.current) {\n        setMutationInFlight(inFlightMutationsRef.current.size > 0);\n      }\n    }\n  }, [environment, isMountedRef, mutation]);\n  useEffect(function () {\n    if (environmentRef.current !== environment || mutationRef.current !== mutation) {\n      inFlightMutationsRef.current = new Set();\n\n      if (isMountedRef.current) {\n        setMutationInFlight(false);\n      }\n\n      environmentRef.current = environment;\n      mutationRef.current = mutation;\n    }\n  }, [environment, isMountedRef, mutation]);\n  var commit = useCallback(function (config) {\n    var disposable = commitMutationFn(environment, (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, config), {}, {\n      mutation: mutation,\n      onCompleted: function onCompleted(response, errors) {\n        cleanup(disposable);\n        config.onCompleted && config.onCompleted(response, errors);\n      },\n      onError: function onError(error) {\n        cleanup(disposable);\n        config.onError && config.onError(error);\n      },\n      onUnsubscribe: function onUnsubscribe() {\n        cleanup(disposable);\n        config.onUnsubscribe && config.onUnsubscribe();\n      }\n    }));\n    inFlightMutationsRef.current.add(disposable);\n\n    if (isMountedRef.current) {\n      setMutationInFlight(true);\n    }\n\n    return disposable;\n  }, [cleanup, commitMutationFn, environment, isMountedRef, mutation]);\n  return [commit, isMutationInFlight];\n}\n\nmodule.exports = useMutation;","map":{"version":3,"sources":["/home/akshay/Atishay/appointy-screening/node_modules/react-relay/lib/relay-hooks/useMutation.js"],"names":["_interopRequireDefault","require","_objectSpread2","React","useRelayEnvironment","_require","defaultCommitMutation","commitMutation","useState","useEffect","useRef","useCallback","useIsMountedRef","useMutation","mutation","commitMutationFn","arguments","length","undefined","environment","isMountedRef","environmentRef","mutationRef","inFlightMutationsRef","Set","_useState","isMutationInFlight","setMutationInFlight","cleanup","disposable","current","size","commit","config","onCompleted","response","errors","onError","error","onUnsubscribe","add","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @emails oncall+relay\n * \n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar React = require('react');\n\nvar useRelayEnvironment = require('./useRelayEnvironment');\n\nvar _require = require('relay-runtime'),\n    defaultCommitMutation = _require.commitMutation;\n\nvar useState = React.useState,\n    useEffect = React.useEffect,\n    useRef = React.useRef,\n    useCallback = React.useCallback;\n\nvar useIsMountedRef = require('./useIsMountedRef');\n\nfunction useMutation(mutation) {\n  var commitMutationFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultCommitMutation;\n  var environment = useRelayEnvironment();\n  var isMountedRef = useIsMountedRef();\n  var environmentRef = useRef(environment);\n  var mutationRef = useRef(mutation);\n  var inFlightMutationsRef = useRef(new Set());\n\n  var _useState = useState(false),\n      isMutationInFlight = _useState[0],\n      setMutationInFlight = _useState[1];\n\n  var cleanup = useCallback(function (disposable) {\n    if (environmentRef.current === environment && mutationRef.current === mutation) {\n      inFlightMutationsRef.current[\"delete\"](disposable);\n\n      if (isMountedRef.current) {\n        setMutationInFlight(inFlightMutationsRef.current.size > 0);\n      }\n    }\n  }, [environment, isMountedRef, mutation]);\n  useEffect(function () {\n    if (environmentRef.current !== environment || mutationRef.current !== mutation) {\n      inFlightMutationsRef.current = new Set();\n\n      if (isMountedRef.current) {\n        setMutationInFlight(false);\n      }\n\n      environmentRef.current = environment;\n      mutationRef.current = mutation;\n    }\n  }, [environment, isMountedRef, mutation]);\n  var commit = useCallback(function (config) {\n    var disposable = commitMutationFn(environment, (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, config), {}, {\n      mutation: mutation,\n      onCompleted: function onCompleted(response, errors) {\n        cleanup(disposable);\n        config.onCompleted && config.onCompleted(response, errors);\n      },\n      onError: function onError(error) {\n        cleanup(disposable);\n        config.onError && config.onError(error);\n      },\n      onUnsubscribe: function onUnsubscribe() {\n        cleanup(disposable);\n        config.onUnsubscribe && config.onUnsubscribe();\n      }\n    }));\n    inFlightMutationsRef.current.add(disposable);\n\n    if (isMountedRef.current) {\n      setMutationInFlight(true);\n    }\n\n    return disposable;\n  }, [cleanup, commitMutationFn, environment, isMountedRef, mutation]);\n  return [commit, isMutationInFlight];\n}\n\nmodule.exports = useMutation;"]},"metadata":{},"sourceType":"script"}